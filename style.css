:root{
  --purple: #6b4eff;
  --purple-soft: #f4f1ff;
  --border: #e6e0fa;
  --muted: #666666;
  --bg: #ffffff;
}

/* reset basics */
*{box-sizing:border-box}
body{ margin:0; font-family: Inter, "Helvetica Neue", Arial, sans-serif; background:#fafafa; color:#222; }

/* header */
header{ padding:18px 20px; background:var(--bg); border-bottom:1px solid var(--border) }
header h1{ margin:0; font-size:20px }
.subtitle{ margin:4px 0 0; color:var(--muted); font-size:13px }

/* controls */
.controls{ display:flex; gap:14px; flex-wrap:wrap; padding:12px 20px; background:var(--bg); border-bottom:1px solid var(--border); align-items:end; }
.filter{ display:flex; flex-direction:column; gap:6px; min-width:160px }
.filter label{ font-size:12px; color:var(--muted) }
.filter select{ padding:8px 10px; border-radius:8px; border:1px solid var(--border); font-size:14px; background:#fff; }
.reset button{ padding:8px 12px; background:var(--purple); color:#fff; border:none; border-radius:8px; cursor:pointer; font-weight:600; }

/* main area */
.main-area{ padding:12px 20px 36px 20px }
.info{ padding:10px 12px; margin-bottom:8px; border-radius:8px; background:#fff6; color:#333; font-size:13px }
.hidden{ display:none }

/* table wrapper: THIS is the scroll container */
.table-wrapper{
  max-height: calc(100vh - 220px);
  overflow:auto;                 /* important: table scroll happens inside this element */
  background:var(--bg);
  border-radius:8px;
  border:1px solid var(--border);
}

/* table base */
table{ width:100%; border-collapse:collapse; font-size:13px; background:var(--bg) }

/* STICKY HEADER: stick to top of .table-wrapper (top:0) */
thead th{
  position: sticky;
  top: 0;                         /* no JS-calculated offset â€” sticky relative to .table-wrapper */
  background: var(--purple-soft);
  z-index: 12;
  border-bottom: 2px solid var(--border);
  padding: 10px 12px;
  text-align: left;
  font-weight: 600;
  white-space: nowrap;
  vertical-align: middle;        /* header centered vertically */
}

/* cells: allow wrapping, proper breaks */
th, td{
  padding:10px 12px;
  white-space: normal;
  word-break: normal;
  overflow-wrap: break-word;
  border-bottom:1px solid var(--border);
}

/* body cells top-align so multi-line content looks neat */
tbody td{ vertical-align: top; }

/* hover */
tbody tr:hover{ background:#fbf8ff; }

/* column widths & visual */
.col-id { width:66px; white-space:nowrap; text-align:center }
.col-role { width:90px; text-align:center; font-weight:700; color:var(--purple) }
.col-function { width:320px; font-size:13px; font-weight:500 }
.col-text-medium, .col-text-wide { font-size:12px; line-height:1.35 }
.col-text-wide { width:380px }

/* tooltip on the right */
.role{ position:relative; cursor:help; display:inline-block; padding:2px 6px; border-radius:4px; }
.role::after{
  content: attr(data-tooltip);
  position: absolute;
  left: 110%;
  top: 50%;
  transform: translateY(-50%);
  display:block;
  width:300px;
  max-width:45vw;
  background:#fff;
  border:1px solid var(--border);
  color:#2b225a;
  padding:10px 12px;
  border-radius:8px;
  font-size:13px;
  line-height:1.4;
  box-shadow:0 8px 28px rgba(10,6,40,.08);
  opacity:0;
  pointer-events:none;
  transition: opacity .12s ease;
  z-index:9999;
  white-space: normal;
}

.role:hover::after{ opacity:1 }

/* responsive */
@media (max-width:800px){
  .role::after{ left:50%; top:120%; transform:translateX(-50%); width:320px }
  .table-wrapper{ max-height: calc(100vh - 260px) }
}

td.col-role {
  vertical-align: middle;
  padding-top: 10px;
  padding-bottom: 10px;
}
